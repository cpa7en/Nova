(function(){'use strict';async function waitForGSAP(){while(typeof window.gsap==='undefined'){await new Promise(r=>setTimeout(r,50));}return window.gsap;}waitForGSAP().then(gsap=>{const defaultConfig={scanInterval:250,minBreakoutScore:75,volumeSpikeMultiplier:1.25,rsiThreshold:5,lookbackPeriod:3,explosionThreshold:1.02,minStrengthDuration:1500,strengthDecayTime:6000,maxHistorySize:180,cooldownPeriod:4000,confirmationCandles:2,confirmationThreshold:1.005,trendFilterThreshold:-0.008,smartMoneyWeight:12,volumeWeight:45,obvWeight:28,vwmaWeight:15,rsiWeight:20,netVolumeWeight:16,holdersWeight:6,whaleWeight:12,sentimentWeight:8,liquidityWeight:18,microTrendSensitivity:2.0,rapidPumpThreshold:1.012,volumeAccelerationFactor:1.7,whaleActivityThreshold:7500,minConfluenceConditions:5,emaShortPeriod:5,emaLongPeriod:20,learningRate:0.2,resistanceProximityThreshold:0.015,proTraderMinAmount:1000};let config={...defaultConfig};const savedConfig=GM_getValue('phoenixConfig');if(savedConfig){config={...defaultConfig,...savedConfig};}const whaleData={totalProTraders:0,currentActivity:'neutral',impact:0,totalBuy:0,totalSell:0,netFlow:0,last10Transactions:[]};const learningSystem={lastBreakout:null,successCount:0,failureCount:0,conditionPerformance:{},adjustWeights:function(success){if(success){this.successCount++;Object.keys(this.conditionPerformance).forEach(condId=>{const weightKey=`${condId.split('_').slice(0,-1).join('_')}_Weight`;if(config[weightKey] !==undefined){config[weightKey]=Math.min(defaultConfig[weightKey]*1.5,config[weightKey]+(defaultConfig[weightKey]*config.learningRate));}});}else{this.failureCount++;Object.keys(this.conditionPerformance).forEach(condId=>{const weightKey=`${condId.split('_').slice(0,-1).join('_')}_Weight`;if(config[weightKey] !==undefined){config[weightKey]=Math.max(defaultConfig[weightKey]*0.7,config[weightKey]-(defaultConfig[weightKey]*config.learningRate));}});}GM_setValue('phoenixConfig',config);},recordConditions:function(activeConditions){this.conditionPerformance={};activeConditions.forEach(cond=>{this.conditionPerformance[cond.id]=true;});}};GM_addStyle(`.phoenix-container,.phoenix-settings-overlay,.phoenix-whale-tooltip{pointer-events:auto;}.phoenix-settings-overlay:not(.active),.phoenix-whale-tooltip:not(.show){pointer-events:none !important;}.phoenix-container{position:fixed;top:20px;right:20px;background:rgba(10,12,18,0.98);border:1px solid #3a3e49;border-radius:16px;color:#f0f0f0;font-family:'Geist','Inter',sans-serif;padding:16px;width:340px;z-index:999999;box-shadow:0 8px 32px rgba(0,0,0,0.4);cursor:pointer;user-select:none;backdrop-filter:blur(12px);transition:transform 0.2s ease-out;transform-origin:top right;touch-action:none;}.phoenix-container.minimized{width:340px;height:54px;overflow:hidden;padding-bottom:0;}.phoenix-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(240,185,11,0.3);}.phoenix-title{font-family:'Geist Mono';font-size:15px;font-weight:800;background:linear-gradient(135deg,#f0b90b,#ff6b00,#ff0080);-webkit-background-clip:text;-webkit-text-fill-color:transparent;display:flex;align-items:center;gap:8px;letter-spacing:0.5px;text-transform:uppercase;}.phoenix-status{background:rgba(25,27,33,0.9);padding:12px;border-radius:8px;margin-bottom:14px;font-size:13px;border-left:4px solid transparent;box-shadow:inset 0 0 12px rgba(0,0,0,0.25);transition:all 0.3s ease;}.phoenix-status.alert{border-left-color:#f0b90b;background:linear-gradient(90deg,rgba(240,185,11,0.1),transparent);animation:pulse-gold 1.8s infinite;}.phoenix-status.explosion{border-left-color:#ff4d4d;background:linear-gradient(90deg,rgba(255,77,77,0.1),transparent);animation:pulse-red 0.9s infinite;}.phoenix-status.hyperspeed{border-left-color:#00ff88;background:linear-gradient(90deg,rgba(0,255,136,0.1),transparent);animation:pulse-hyperspeed 0.6s infinite;}.phoenix-score-container{display:flex;justify-content:space-between;margin-bottom:8px;font-size:13px;font-weight:600;}.phoenix-score-value{font-weight:800;background:linear-gradient(135deg,#f0b90b,#ff6b00);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}.phoenix-progress{height:8px;background:rgba(50,54,67,0.6);border-radius:4px;margin-bottom:-21px;overflow:hidden;box-shadow:inset 0 0 8px rgba(0,0,0,0.4);position:relative;}.phoenix-progress-bar{height:100%;background:linear-gradient(135deg,#f0b90b,#ff6b00);transition:width 0.6s cubic-bezier(0.16,1,0.3,1);box-shadow:0 0 12px rgba(240,185,11,0.4);position:relative;overflow:hidden;}.phoenix-progress-bar::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,rgba(255,255,255,0)0%,rgba(255,255,255,0.3)50%,rgba(255,255,255,0)100%);animation:shine 2.5s infinite;}.phoenix-conditions{margin:14px 0;display:grid;grid-template-columns:1fr 1fr;gap:10px;}.phoenix-condition{display:flex;align-items:center;font-size:12px;gap:8px;padding:8px;border-radius:6px;background:rgba(25,27,33,0.7);transition:all 0.3s ease;border:1px solid rgba(255,255,255,0.05);}.phoenix-condition:hover{background:rgba(35,37,43,0.9);transform:translateY(-2px);}.phoenix-condition .indicator{width:12px;height:12px;border-radius:50%;background:#3a3e49;flex-shrink:0;transition:all 0.3s ease;position:relative;}.phoenix-condition.active .indicator{background:#f0b90b;box-shadow:0 0 10px rgba(240,185,11,0.6);}.phoenix-condition.active.explosion .indicator{background:#ff4d4d;box-shadow:0 0 10px rgba(255,77,77,0.6);animation:pulse 1.5s infinite;}.phoenix-condition.active.hyperspeed .indicator{background:#00ff88;box-shadow:0 0 10px rgba(0,255,136,0.6);animation:pulse-hyperspeed-icon 0.8s infinite;}.phoenix-condition.active{color:#fff;font-weight:700;background:rgba(30,32,38,0.9);}.phoenix-explosion-meter{height:6px;background:rgba(50,54,67,0.6);border-radius:3px;margin-top:14px;overflow:hidden;box-shadow:inset 0 0 6px rgba(0,0,0,0.3);}.phoenix-explosion-progress{height:100%;background:linear-gradient(135deg,#ff4d4d,#ff6b00);width:0%;transition:width 0.6s cubic-bezier(0.16,1,0.3,1);}.phoenix-hyperspeed-progress{height:100%;background:linear-gradient(135deg,#00ff88,#00b3ff);width:0%;transition:width 0.3s cubic-bezier(0.16,1,0.3,1);}.phoenix-chart-container{margin-top:14px;height:120px;position:relative;background:rgba(20,22,28,0.6);border-radius:8px;overflow:hidden;}.phoenix-additional-info{font-size:12px;margin-top:12px;color:#8b929f;display:grid;grid-template-columns:1fr 1fr;gap:10px;}.phoenix-info-item{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px dashed rgba(139,146,159,0.2);}.phoenix-info-value{font-weight:700;color:#f0b90b;}.phoenix-info-value.hyperspeed{color:#00ff88;}.phoenix-info-value.positive{color:#00ff88;}.phoenix-info-value.negative{color:#ff4d4d;}.phoenix-toast{position:fixed;bottom:25px;right:25px;background:linear-gradient(135deg,rgba(20,22,28,0.98),rgba(30,32,38,0.98));border:1px solid #f0b90b;color:#fff;padding:14px 16px;border-radius:10px;box-shadow:0 12px 32px rgba(0,0,0,0.5);z-index:9999999;font-size:12px;width:280px;opacity:0;transform:translateY(20px)scale(0.95);transition:all 0.5s cubic-bezier(0.16,1,0.3,1);backdrop-filter:blur(12px);}.phoenix-toast.explosion{border-color:#ff4d4d;background:linear-gradient(135deg,rgba(28,20,20,0.98),rgba(38,30,30,0.98));animation:shake 0.5s cubic-bezier(.36,.07,.19,.97)both;}.phoenix-toast.hyperspeed{border-color:#00ff88;background:linear-gradient(135deg,rgba(20,28,22,0.98),rgba(30,38,32,0.98));animation:hyperspeed-pulse 0.4s 2;}.phoenix-toast.show{opacity:1;transform:translateY(0)scale(1);}.phoenix-toast-header{display:flex;align-items:center;gap:8px;margin-bottom:8px;color:#f0b90b;font-weight:800;font-size:14px;}.phoenix-toast-header.explosion{color:#ff4d4d;}.phoenix-toast-header.hyperspeed{color:#00ff88;}.phoenix-toast-detail{display:flex;justify-content:space-between;margin:6px 0;font-size:13px;}.phoenix-toast-icon{width:20px;height:20px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:rgba(240,185,11,0.15);}.phoenix-toast.explosion .phoenix-toast-icon{background:rgba(255,77,77,0.15);}.phoenix-toast.hyperspeed .phoenix-toast-icon{background:rgba(0,255,136,0.15);}.phoenix-minimize-btn,.phoenix-settings-btn{cursor:pointer;color:#8b929f;font-size:16px;transition:all 0.3s ease;padding:4px;border-radius:6px;display:flex;align-items:center;justify-content:center;width:24px;height:24px;}.phoenix-minimize-btn:hover,.phoenix-settings-btn:hover{color:#f0b90b;background:rgba(240,185,11,0.15);transform:rotate(15deg);}.phoenix-settings-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:1000000;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:opacity 0.4s ease;backdrop-filter:blur(8px);}.phoenix-settings-overlay.active{opacity:1;pointer-events:all;}.phoenix-settings-container{background:rgba(10,12,18,0.98);border:1px solid #3a3e49;border-radius:16px;width:440px;max-width:90%;max-height:90vh;overflow-y:auto;padding:24px;box-shadow:0 15px 40px rgba(0,0,0,0.6);transform:translateY(30px);transition:transform 0.4s cubic-bezier(0.16,1,0.3,1);}.phoenix-settings-overlay.active .phoenix-settings-container{transform:translateY(0);}.phoenix-settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:12px;border-bottom:1px solid rgba(240,185,11,0.3);}.phoenix-settings-title{font-size:18px;font-weight:800;color:#f0b90b;display:flex;align-items:center;gap:10px;}.phoenix-settings-close{cursor:pointer;color:#8b929f;font-size:20px;transition:all 0.3s ease;padding:4px;border-radius:6px;display:flex;align-items:center;justify-content:center;width:28px;height:28px;}.phoenix-settings-close:hover{color:#f0b90b;background:rgba(240,185,11,0.15);transform:rotate(90deg);}.phoenix-settings-group{margin-bottom:24px;}.phoenix-settings-group-title{font-size:15px;font-weight:700;color:#f0b90b;margin-bottom:12px;display:flex;align-items:center;gap:8px;}.phoenix-settings-item{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;}.phoenix-settings-label{font-size:14px;color:#e0e0e0;flex:1;}.phoenix-settings-input{background:rgba(25,27,33,0.9);border:1px solid #3a3e49;border-radius:8px;color:#f0f0f0;padding:10px 14px;width:120px;font-size:14px;transition:all 0.3s ease;}.phoenix-settings-input:focus{outline:none;border-color:#f0b90b;box-shadow:0 0 0 3px rgba(240,185,11,0.2);}.phoenix-settings-buttons{display:flex;justify-content:center;gap:12px;margin-top:30px;}.phoenix-settings-btn-primary{background:linear-gradient(135deg,#f0b90b,#ff6b00);color:#111;border:none;border-radius:8px;padding:8px 16px;font-weight:700;cursor:pointer;transition:all 0.3s ease;font-size:14px;}.phoenix-settings-btn-primary:hover{opacity:0.9;transform:translateY(-2px);box-shadow:0 4px 12px rgba(240,185,11,0.3);}.phoenix-settings-btn-secondary{background:rgba(50,54,67,0.9);color:#e0e0e0;border:none;border-radius:8px;padding:8px 16px;font-weight:700;cursor:pointer;transition:all 0.3s ease;font-size:14px;}.phoenix-settings-btn-secondary:hover{background:rgba(70,74,87,0.9);transform:translateY(-2px);}.phoenix-settings-message{text-align:center;margin-top:12px;font-size:14px;color:#f0b90b;opacity:0;transition:opacity 0.3s ease;height:20px;}.phoenix-settings-message.show{opacity:1;}@keyframes pulse-gold{0%{box-shadow:0 0 0 0 rgba(240,185,11,0.5);}70%{box-shadow:0 0 0 12px rgba(240,185,11,0);}100%{box-shadow:0 0 0 0 rgba(240,185,11,0);}}@keyframes pulse-red{0%{box-shadow:0 0 0 0 rgba(255,77,77,0.5);}70%{box-shadow:0 0 0 15px rgba(255,77,77,0);}100%{box-shadow:0 0 0 0 rgba(255,77,77,0);}}@keyframes pulse-hyperspeed{0%{box-shadow:0 0 0 0 rgba(0,255,136,0.5);}70%{box-shadow:0 0 0 15px rgba(0,255,136,0);}100%{box-shadow:0 0 0 0 rgba(0,255,136,0);}}@keyframes pulse-hyperspeed-icon{0%{transform:scale(1);box-shadow:0 0 0 0 rgba(0,255,136,0.6);}50%{transform:scale(1.3);box-shadow:0 0 0 8px rgba(0,255,136,0);}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(0,255,136,0);}}@keyframes shine{0%{transform:translateX(-100%);}100%{transform:translateX(100%);}}@keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.2);}100%{transform:scale(1);}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0);}20%,80%{transform:translate3d(2px,0,0);}30%,50%,70%{transform:translate3d(-4px,0,0);}40%,60%{transform:translate3d(4px,0,0);}}@keyframes hyperspeed-pulse{0%{transform:scale(1);box-shadow:0 0 0 0 rgba(0,255,136,0.4);}70%{transform:scale(1.02);box-shadow:0 0 0 10px rgba(0,255,136,0);}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(0,255,136,0);}}.phoenix-prediction-gauge{width:100%;height:8px;background:rgba(50,54,67,0.6);border-radius:4px;margin:16px 0;overflow:hidden;position:relative;}.phoenix-prediction-fill{height:100%;width:0%;background:linear-gradient(90deg,#4dff4d,#00b300);transition:width 0.6s cubic-bezier(0.16,1,0.3,1);}.phoenix-prediction-labels{display:flex;justify-content:space-between;font-size:11px;color:#8b929f;margin-top:4px;}.phoenix-accuracy-badge{position:absolute;top:-10px;right:-10px;background:linear-gradient(135deg,#ff4d4d,#ff6b00);color:white;font-size:10px;font-weight:800;padding:4px 8px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.3);z-index:1;transform:rotate(15deg);}.phoenix-hyperspeed-badge{position:absolute;top:-10px;left:-10px;background:linear-gradient(135deg,#00ff88,#00b3ff);color:#111;font-size:10px;font-weight:800;padding:4px 8px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.3);z-index:1;transform:rotate(-15deg);}.phoenix-whale-tooltip{position:fixed;top:20px;right:370px;width:320px;background:rgba(15,17,23,0.98);border:1px solid #3a3e49;border-radius:12px;padding:16px;box-shadow:0 8px 32px rgba(0,0,0,0.4);z-index:999998;opacity:0;transform:translateX(20px);transition:all 0.3s cubic-bezier(0.16,1,0.3,1);pointer-events:all;backdrop-filter:blur(12px);}.phoenix-whale-tooltip.show{opacity:1;transform:translateX(0);}.phoenix-whale-tooltip-header{font-size:16px;font-weight:800;margin-bottom:12px;color:#f0b90b;display:flex;align-items:center;gap:8px;border-bottom:1px solid rgba(240,185,11,0.3);padding-bottom:8px;}.phoenix-whale-tooltip-item{display:flex;justify-content:space-between;margin-bottom:10px;font-size:13px;}.phoenix-whale-tooltip-label{color:#8b929f;}.phoenix-whale-tooltip-value{font-weight:700;}.phoenix-whale-tooltip-value.buy{color:#00ff88;}.phoenix-whale-tooltip-value.sell{color:#ff4d4d;}.phoenix-whale-tooltip-divider{height:1px;background:rgba(58,62,73,0.5);margin:12px 0;}.phoenix-whale-tooltip-impact{font-size:12px;color:#8b929f;margin-top:21px;line-height:1.4;}.phoenix-whale-tooltip-transaction{display:flex;justify-content:space-between;font-size:12px;padding:4px 0;border-bottom:1px dashed rgba(139,146,159,0.1);}.phoenix-whale-tooltip-transaction:last-child{border-bottom:none;}.phoenix-whale-tooltip-transaction-type{font-weight:600;}.phoenix-whale-tooltip-transaction-type.buy{color:#00ff88;}.phoenix-whale-tooltip-transaction-type.sell{color:#ff4d4d;}.phoenix-whale-tooltip-transaction-amount{font-weight:700;min-width:60px;text-align:right;}.phoenix-whale-tooltip-transaction-time{color:#8b929f;font-size:11px;min-width:30px;text-align:right;}.phoenix-whale-tooltip-transaction-amount.buy{color:#00ff88;}.phoenix-whale-tooltip-transaction-amount.sell{color:#ff4d4d;}.phoenix-whale-tooltip-close{position:absolute;top:12px;right:12px;color:#8b929f;cursor:pointer;font-size:14px;transition:all 0.2s ease;}.phoenix-whale-tooltip-close:hover{color:#f0b90b;transform:scale(1.2);}.phoenix-settings-container{scroll-behavior:smooth;}`);const container=document.createElement('div');container.className='phoenix-container';container.innerHTML=`<div class="phoenix-header"><div class="phoenix-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="url(#phoenix-gradient)"><defs><linearGradient id="phoenix-gradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#f0b90b"/><stop offset="50%" stop-color="#ff6b00"/><stop offset="100%" stop-color="#ff0080"/></linearGradient></defs><path d="M12 2L15 8L21 9L17 14L18 20L12 17L6 20L7 14L3 9L9 8L12 2Z"/></svg>Nova Cash ⚡<span class="phoenix-hyperspeed-badge">AI POWERED</span></div><div style="display:flex;align-items:center;gap:8px;"><span class="phoenix-settings-btn" title="Settings">⚙</span><span class="phoenix-minimize-btn" title="Minimize/Restore">🗗</span></div></div><div id="phoenix-content"><div id="phoenix-status" class="phoenix-status">Initializing AI quantum scanner...</div><div class="phoenix-score-container"><span>BREAKOUT PREDICTION</span><span id="phoenix-score-value" class="phoenix-score-value">0%</span></div><div class="phoenix-progress"><div id="phoenix-progress-bar" class="phoenix-progress-bar" style="width:0%"></div></div><div class="phoenix-prediction-gauge"><div id="phoenix-prediction-fill" class="phoenix-prediction-fill"></div><div class="phoenix-prediction-labels"><span>Low</span><span>Medium</span><span>High</span><span>Extreme</span></div></div><div id="phoenix-conditions" class="phoenix-conditions"></div><div class="phoenix-explosion-meter"><div id="phoenix-explosion-progress" class="phoenix-explosion-progress"></div><div id="phoenix-hyperspeed-progress" class="phoenix-hyperspeed-progress"></div></div><div id="phoenix-chart-container" class="phoenix-chart-container"></div><div id="phoenix-additional-info" class="phoenix-additional-info"><div class="phoenix-info-item"><span>N. Res:</span><span id="phoenix-resistance" class="phoenix-info-value">-</span></div><div class="phoenix-info-item"><span>Liquidity Ratio:</span><span id="phoenix-liquidity" class="phoenix-info-value">-</span></div><div class="phoenix-info-item"><span>Volume Change:</span><span id="phoenix-volume-change" class="phoenix-info-value">-</span></div><div class="phoenix-info-item"><span>Smart Money:</span><span id="phoenix-smart-money" class="phoenix-info-value">-</span></div><div class="phoenix-info-item"><span>Trend Strength:</span><span id="phoenix-trend-strength" class="phoenix-info-value">-</span></div><div class="phoenix-info-item"><span>W. Activity:</span><span id="phoenix-whale-activity" class="phoenix-info-value">-</span></div><div class="phoenix-info-item"><span>M. Sentiment:</span><span id="phoenix-market-sentiment" class="phoenix-info-value">-</span></div><div class="phoenix-info-item"><span>AI Accuracy:</span><span id="phoenix-accuracy" class="phoenix-info-value">-</span></div></div></div>`;document.body.appendChild(container);const whaleTooltip=document.createElement('div');whaleTooltip.className='phoenix-whale-tooltip';whaleTooltip.innerHTML=`<div class="phoenix-whale-tooltip-header"><svg width="16" height="16" viewBox="0 0 24 24" fill="#f0b90b"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>Smart Money Insights<span class="phoenix-whale-tooltip-close">×</span></div><div class="phoenix-whale-tooltip-item"><span class="phoenix-whale-tooltip-label">Total Buy:</span><span id="whale-tooltip-total-buy" class="phoenix-whale-tooltip-value buy">$0</span></div><div class="phoenix-whale-tooltip-item"><span class="phoenix-whale-tooltip-label">Total Sell:</span><span id="whale-tooltip-total-sell" class="phoenix-whale-tooltip-value sell">$0</span></div><div class="phoenix-whale-tooltip-item"><span class="phoenix-whale-tooltip-label">Net Vol:</span><span id="whale-tooltip-net-flow" class="phoenix-whale-tooltip-value">$0</span></div><div class="phoenix-whale-tooltip-divider"></div><div class="phoenix-whale-tooltip-item"><span class="phoenix-whale-tooltip-label">Pro Traders:</span><span id="whale-tooltip-total" class="phoenix-whale-tooltip-value">0</span></div><div class="phoenix-whale-tooltip-item"><span class="phoenix-whale-tooltip-label">Holders:</span><span id="whale-tooltip-holders" class="phoenix-whale-tooltip-value">0</span></div><div class="phoenix-whale-tooltip-divider"></div><div class="phoenix-whale-tooltip-item"><span class="phoenix-whale-tooltip-label">Current Status:</span><span id="whale-tooltip-current" class="phoenix-whale-tooltip-value">Neutral</span></div><div class="phoenix-whale-tooltip-item"><span class="phoenix-whale-tooltip-label">Impact on Score:</span><span id="whale-tooltip-impact" class="phoenix-whale-tooltip-value">+0 pts</span></div><div class="phoenix-whale-tooltip-divider"></div><div style="max-height:120px;overflow-y:auto;margin-top:8px;padding-right:3px;"><div style="font-size:11px;color:#8b929f;margin-bottom:6px;">Recent Transactions:</div><div id="whale-tooltip-transactions"></div></div><div class="phoenix-whale-tooltip-impact">Large buy orders from pro traders significantly increase breakout probability. Whale sells may indicate profit taking.</div>`;document.body.appendChild(whaleTooltip);const tooltipCloseBtn=whaleTooltip.querySelector('.phoenix-whale-tooltip-close');tooltipCloseBtn.addEventListener('click',()=>{whaleTooltip.classList.remove('show');});let tooltipHovered=false;let tooltipTimeout=null;const statusElement=document.getElementById('phoenix-status');if(statusElement){statusElement.addEventListener('mouseenter',()=>{clearTimeout(tooltipTimeout);whaleTooltip.classList.add('show');});statusElement.addEventListener('mouseleave',()=>{if(!tooltipHovered){tooltipTimeout=setTimeout(()=>{if(!tooltipHovered){whaleTooltip.classList.remove('show');}},250);}});}whaleTooltip.addEventListener('mouseenter',()=>{tooltipHovered=true;clearTimeout(tooltipTimeout);});whaleTooltip.addEventListener('mouseleave',()=>{tooltipHovered=false;tooltipTimeout=setTimeout(()=>{whaleTooltip.classList.remove('show');},250);});const settingsOverlay=document.createElement('div');settingsOverlay.className='phoenix-settings-overlay';settingsOverlay.innerHTML=`<div class="phoenix-settings-container"><div class="phoenix-settings-header"><div class="phoenix-settings-title"><svg width="20" height="20" viewBox="0 0 24 24" fill="#f0b90b"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07.1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"/></svg>Nova Cash Settings</div><div class="phoenix-settings-close">×</div></div><div class="phoenix-settings-group"><div class="phoenix-settings-group-title">Scanner Parameters</div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Scan Interval(ms)</label><input type="number" class="phoenix-settings-input" id="phoenix-scan-interval" min="100" max="1000" step="50"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Min Breakout Score</label><input type="number" class="phoenix-settings-input" id="phoenix-min-breakout-score" min="50" max="100" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Volume Spike Multiplier</label><input type="number" class="phoenix-settings-input" id="phoenix-volume-spike-multiplier" min="1.1" max="3" step="0.05"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">RSI Threshold</label><input type="number" class="phoenix-settings-input" id="phoenix-rsi-threshold" min="5" max="15" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Micro-Trend Sensitivity</label><input type="number" class="phoenix-settings-input" id="phoenix-micro-trend-sensitivity" min="1" max="3" step="0.1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Min Confluence Conditions</label><input type="number" class="phoenix-settings-input" id="phoenix-min-confluence" min="3" max="8" step="1"></div></div><div class="phoenix-settings-group"><div class="phoenix-settings-group-title">Breakout Confirmation</div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Confirmation Candles</label><input type="number" class="phoenix-settings-input" id="phoenix-confirmation-candles" min="1" max="5" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Confirmation Threshold</label><input type="number" class="phoenix-settings-input" id="phoenix-confirmation-threshold" min="1.001" max="1.02" step="0.001"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Cooldown Period(ms)</label><input type="number" class="phoenix-settings-input" id="phoenix-cooldown-period" min="1000" max="15000" step="500"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Rapid Pump Threshold</label><input type="number" class="phoenix-settings-input" id="phoenix-rapid-pump-threshold" min="1.005" max="1.03" step="0.001"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Resistance Proximity(%)</label><input type="number" class="phoenix-settings-input" id="phoenix-resistance-threshold" min="0.5" max="5" step="0.1"></div></div><div class="phoenix-settings-group"><div class="phoenix-settings-group-title">Explosion Detection</div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Explosion Threshold</label><input type="number" class="phoenix-settings-input" id="phoenix-explosion-threshold" min="1.01" max="1.1" step="0.005"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Min Strength Duration(ms)</label><input type="number" class="phoenix-settings-input" id="phoenix-min-strength-duration" min="1000" max="10000" step="250"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Strength Decay Time(ms)</label><input type="number" class="phoenix-settings-input" id="phoenix-strength-decay-time" min="2000" max="20000" step="250"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Volume Acceleration Factor</label><input type="number" class="phoenix-settings-input" id="phoenix-volume-acceleration-factor" min="1" max="3" step="0.1"></div></div><div class="phoenix-settings-group"><div class="phoenix-settings-group-title">Condition Weights</div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Volume Spike Weight</label><input type="number" class="phoenix-settings-input" id="phoenix-volume-weight" min="10" max="50" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">OBV Trend Weight</label><input type="number" class="phoenix-settings-input" id="phoenix-obv-weight" min="10" max="30" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">VWMA Break Weight</label><input type="number" class="phoenix-settings-input" id="phoenix-vwma-weight" min="5" max="20" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">RSI Extreme Weight</label><input type="number" class="phoenix-settings-input" id="phoenix-rsi-weight" min="5" max="20" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Liquidity Weight</label><input type="number" class="phoenix-settings-input" id="phoenix-liquidity-weight" min="5" max="25" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Smart Money Weight</label><input type="number" class="phoenix-settings-input" id="phoenix-smart-money-weight" min="1" max="15" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Whale Activity Weight</label><input type="number" class="phoenix-settings-input" id="phoenix-whale-weight" min="1" max="15" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Market Sentiment Weight</label><input type="number" class="phoenix-settings-input" id="phoenix-sentiment-weight" min="1" max="15" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">AI Learning Rate</label><input type="number" class="phoenix-settings-input" id="phoenix-learning-rate" min="0.05" max="0.5" step="0.05"></div></div><div class="phoenix-settings-group"><div class="phoenix-settings-group-title">EMA Settings</div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Short EMA Period</label><input type="number" class="phoenix-settings-input" id="phoenix-ema-short" min="3" max="10" step="1"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Long EMA Period</label><input type="number" class="phoenix-settings-input" id="phoenix-ema-long" min="10" max="30" step="1"></div></div><div class="phoenix-settings-group"><div class="phoenix-settings-group-title">Pro Trader Detection</div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Whale Activity Threshold(USD)</label><input type="number" class="phoenix-settings-input" id="phoenix-whale-threshold" min="1000" max="100000" step="1000"></div><div class="phoenix-settings-item"><label class="phoenix-settings-label">Min Amount for Pro(USD)</label><input type="number" class="phoenix-settings-input" id="phoenix-pro-trader-amount" min="100" max="10000" step="100"></div></div><div class="phoenix-settings-buttons"><button class="phoenix-settings-btn-secondary" id="phoenix-settings-reset">Reset Defaults</button><button class="phoenix-settings-btn-primary" id="phoenix-settings-save">Save Settings</button></div><div class="phoenix-settings-message" id="phoenix-settings-message"></div></div>`;document.body.appendChild(settingsOverlay);document.getElementById('phoenix-scan-interval').value=config.scanInterval;document.getElementById('phoenix-min-breakout-score').value=config.minBreakoutScore;document.getElementById('phoenix-volume-spike-multiplier').value=config.volumeSpikeMultiplier;document.getElementById('phoenix-rsi-threshold').value=config.rsiThreshold;document.getElementById('phoenix-confirmation-candles').value=config.confirmationCandles;document.getElementById('phoenix-confirmation-threshold').value=config.confirmationThreshold;document.getElementById('phoenix-cooldown-period').value=config.cooldownPeriod;document.getElementById('phoenix-explosion-threshold').value=config.explosionThreshold;document.getElementById('phoenix-min-strength-duration').value=config.minStrengthDuration;document.getElementById('phoenix-strength-decay-time').value=config.strengthDecayTime;document.getElementById('phoenix-volume-weight').value=config.volumeWeight;document.getElementById('phoenix-obv-weight').value=config.obvWeight;document.getElementById('phoenix-vwma-weight').value=config.vwmaWeight;document.getElementById('phoenix-rsi-weight').value=config.rsiWeight;document.getElementById('phoenix-liquidity-weight').value=config.liquidityWeight;document.getElementById('phoenix-smart-money-weight').value=config.smartMoneyWeight;document.getElementById('phoenix-whale-weight').value=config.whaleWeight;document.getElementById('phoenix-sentiment-weight').value=config.sentimentWeight;document.getElementById('phoenix-micro-trend-sensitivity').value=config.microTrendSensitivity;document.getElementById('phoenix-rapid-pump-threshold').value=config.rapidPumpThreshold;document.getElementById('phoenix-volume-acceleration-factor').value=config.volumeAccelerationFactor;document.getElementById('phoenix-whale-threshold').value=config.whaleActivityThreshold;document.getElementById('phoenix-pro-trader-amount').value=config.proTraderMinAmount;document.getElementById('phoenix-min-confluence').value=config.minConfluenceConditions;document.getElementById('phoenix-ema-short').value=config.emaShortPeriod;document.getElementById('phoenix-ema-long').value=config.emaLongPeriod;document.getElementById('phoenix-learning-rate').value=config.learningRate;document.getElementById('phoenix-resistance-threshold').value=config.resistanceProximityThreshold*100;const settingsBtn=container.querySelector('.phoenix-settings-btn');const settingsCloseBtn=settingsOverlay.querySelector('.phoenix-settings-close');const resetBtn=settingsOverlay.querySelector('#phoenix-settings-reset');const saveBtn=settingsOverlay.querySelector('#phoenix-settings-save');const settingsMessage=settingsOverlay.querySelector('#phoenix-settings-message');function showSettingsMessage(text,duration=2000){settingsMessage.textContent=text;settingsMessage.classList.add('show');setTimeout(()=>{settingsMessage.classList.remove('show');},duration);}settingsBtn.addEventListener('click',(e)=>{e.stopPropagation();settingsOverlay.classList.add('active');});settingsCloseBtn.addEventListener('click',()=>{settingsOverlay.classList.remove('active');});resetBtn.addEventListener('click',()=>{if(confirm('Reset all settings to default values?')){config={...defaultConfig};document.getElementById('phoenix-scan-interval').value=config.scanInterval;document.getElementById('phoenix-min-breakout-score').value=config.minBreakoutScore;document.getElementById('phoenix-volume-spike-multiplier').value=config.volumeSpikeMultiplier;document.getElementById('phoenix-rsi-threshold').value=config.rsiThreshold;document.getElementById('phoenix-confirmation-candles').value=config.confirmationCandles;document.getElementById('phoenix-confirmation-threshold').value=config.confirmationThreshold;document.getElementById('phoenix-cooldown-period').value=config.cooldownPeriod;document.getElementById('phoenix-explosion-threshold').value=config.explosionThreshold;document.getElementById('phoenix-min-strength-duration').value=config.minStrengthDuration;document.getElementById('phoenix-strength-decay-time').value=config.strengthDecayTime;document.getElementById('phoenix-volume-weight').value=config.volumeWeight;document.getElementById('phoenix-obv-weight').value=config.obvWeight;document.getElementById('phoenix-vwma-weight').value=config.vwmaWeight;document.getElementById('phoenix-rsi-weight').value=config.rsiWeight;document.getElementById('phoenix-liquidity-weight').value=config.liquidityWeight;document.getElementById('phoenix-smart-money-weight').value=config.smartMoneyWeight;document.getElementById('phoenix-whale-weight').value=config.whaleWeight;document.getElementById('phoenix-sentiment-weight').value=config.sentimentWeight;document.getElementById('phoenix-micro-trend-sensitivity').value=config.microTrendSensitivity;document.getElementById('phoenix-rapid-pump-threshold').value=config.rapidPumpThreshold;document.getElementById('phoenix-volume-acceleration-factor').value=config.volumeAccelerationFactor;document.getElementById('phoenix-whale-threshold').value=config.whaleActivityThreshold;document.getElementById('phoenix-pro-trader-amount').value=config.proTraderMinAmount;document.getElementById('phoenix-min-confluence').value=config.minConfluenceConditions;document.getElementById('phoenix-ema-short').value=config.emaShortPeriod;document.getElementById('phoenix-ema-long').value=config.emaLongPeriod;document.getElementById('phoenix-learning-rate').value=config.learningRate;document.getElementById('phoenix-resistance-threshold').value=config.resistanceProximityThreshold*100;GM_setValue('phoenixConfig',null);showSettingsMessage('Settings reset to defaults!');}});saveBtn.addEventListener('click',()=>{config.scanInterval=parseInt(document.getElementById('phoenix-scan-interval').value);config.minBreakoutScore=parseInt(document.getElementById('phoenix-min-breakout-score').value);config.volumeSpikeMultiplier=parseFloat(document.getElementById('phoenix-volume-spike-multiplier').value);config.rsiThreshold=parseInt(document.getElementById('phoenix-rsi-threshold').value);config.confirmationCandles=parseInt(document.getElementById('phoenix-confirmation-candles').value);config.confirmationThreshold=parseFloat(document.getElementById('phoenix-confirmation-threshold').value);config.cooldownPeriod=parseInt(document.getElementById('phoenix-cooldown-period').value);config.explosionThreshold=parseFloat(document.getElementById('phoenix-explosion-threshold').value);config.minStrengthDuration=parseInt(document.getElementById('phoenix-min-strength-duration').value);config.strengthDecayTime=parseInt(document.getElementById('phoenix-strength-decay-time').value);config.volumeWeight=parseInt(document.getElementById('phoenix-volume-weight').value);config.obvWeight=parseInt(document.getElementById('phoenix-obv-weight').value);config.vwmaWeight=parseInt(document.getElementById('phoenix-vwma-weight').value);config.rsiWeight=parseInt(document.getElementById('phoenix-rsi-weight').value);config.liquidityWeight=parseInt(document.getElementById('phoenix-liquidity-weight').value);config.smartMoneyWeight=parseInt(document.getElementById('phoenix-smart-money-weight').value);config.whaleWeight=parseInt(document.getElementById('phoenix-whale-weight').value);config.sentimentWeight=parseInt(document.getElementById('phoenix-sentiment-weight').value);config.microTrendSensitivity=parseFloat(document.getElementById('phoenix-micro-trend-sensitivity').value);config.rapidPumpThreshold=parseFloat(document.getElementById('phoenix-rapid-pump-threshold').value);config.volumeAccelerationFactor=parseFloat(document.getElementById('phoenix-volume-acceleration-factor').value);config.whaleActivityThreshold=parseInt(document.getElementById('phoenix-whale-threshold').value);config.proTraderMinAmount=parseInt(document.getElementById('phoenix-pro-trader-amount').value);config.minConfluenceConditions=parseInt(document.getElementById('phoenix-min-confluence').value);config.emaShortPeriod=parseInt(document.getElementById('phoenix-ema-short').value);config.emaLongPeriod=parseInt(document.getElementById('phoenix-ema-long').value);config.learningRate=parseFloat(document.getElementById('phoenix-learning-rate').value);config.resistanceProximityThreshold=parseFloat(document.getElementById('phoenix-resistance-threshold').value)/100;GM_setValue('phoenixConfig',config);showSettingsMessage('Settings saved successfully!');setTimeout(()=>{settingsOverlay.classList.remove('active');},1000);});const minimizeBtn=container.querySelector('.phoenix-minimize-btn');let isMinimized=false;minimizeBtn.addEventListener('click',(e)=>{e.stopPropagation();isMinimized=!isMinimized;container.classList.toggle('minimized',isMinimized);minimizeBtn.textContent=isMinimized ? '🗗':'🗗';GM_setValue('isMinimized',isMinimized);});const savedMinimized=GM_getValue('isMinimized',false);if(savedMinimized){container.classList.add('minimized');minimizeBtn.textContent='🗗';isMinimized=true;}let isDragging=false;let offsetX,offsetY;let startX,startY;let translateX=0,translateY=0;let savedPos=GM_getValue('containerPosition',{x:null,y:null});if(savedPos.x !==null && savedPos.y !==null){container.style.left=`${savedPos.x}px`;container.style.top=`${savedPos.y}px`;container.style.right='unset';container.style.position='fixed';container.style.transform='none';whaleTooltip.style.left=`${savedPos.x+container.offsetWidth+10}px`;whaleTooltip.style.top=`${savedPos.y}px`;}function startDrag(e){if(e.target.classList.contains('phoenix-minimize-btn')|| e.target.classList.contains('phoenix-settings-btn')|| e.target.classList.contains('phoenix-settings-input')|| e.target.tagName==='INPUT' || e.target.tagName==='BUTTON')return;isDragging=true;if(e.type==='mousedown'){startX=e.clientX;startY=e.clientY;}else if(e.type==='touchstart'){startX=e.touches[0].clientX;startY=e.touches[0].clientY;}const rect=container.getBoundingClientRect();offsetX=startX-rect.left;offsetY=startY-rect.top;container.style.cursor='grabbing';container.style.transition='none';e.preventDefault();}function handleDrag(e){if(!isDragging)return;let clientX,clientY;if(e.type==='mousemove'){clientX=e.clientX;clientY=e.clientY;}else if(e.type==='touchmove'){clientX=e.touches[0].clientX;clientY=e.touches[0].clientY;}const newLeft=clientX-offsetX;const newTop=clientY-offsetY;const maxX=window.innerWidth-container.offsetWidth;const maxY=window.innerHeight-container.offsetHeight;container.style.left=`${Math.max(0,Math.min(newLeft,maxX))}px`;container.style.top=`${newTop}px`;container.style.right='unset';const containerRect=container.getBoundingClientRect();const header=container.querySelector('.phoenix-header');const headerHeight=header ? header.offsetTop+header.offsetHeight:0;whaleTooltip.style.left=`${containerRect.right+10}px`;whaleTooltip.style.top=`${containerRect.top+headerHeight}px`;e.preventDefault();}function endDrag(e){if(!isDragging)return;isDragging=false;container.style.cursor='pointer';container.style.transition='transform 0.2s ease-out';const rect=container.getBoundingClientRect();savedPos={x:rect.left,y:rect.top};GM_setValue('containerPosition',savedPos);}container.addEventListener('mousedown',startDrag);document.addEventListener('mousemove',handleDrag);document.addEventListener('mouseup',endDrag);container.addEventListener('touchstart',startDrag,{passive:false});document.addEventListener('touchmove',handleDrag,{passive:false});document.addEventListener('touchend',endDrag);const conditions=[{id:'volume_spike',label:`Volume Spike(${config.volumeSpikeMultiplier}x Avg)`,weight:config.volumeWeight},{id:'obv_trend',label:'OBV Strong Uptrend ↑↑',weight:config.obvWeight},{id:'vwma_break',label:'Price>VWMA(20)',weight:config.vwmaWeight},{id:'rsi_extreme',label:`RSI(2)<${config.rsiThreshold}or>${100-config.rsiThreshold}`,weight:config.rsiWeight},{id:'net_volume',label:'Strong Net Volume ↑↑',weight:config.netVolumeWeight},{id:'holders_growth',label:'Holders Rapid Growth',weight:config.holdersWeight},{id:'smart_money',label:'Smart Money Accumulation',weight:config.smartMoneyWeight},{id:'whale_activity',label:'Whale Transactions ↑',weight:config.whaleWeight},{id:'market_sentiment',label:'Positive Market Sentiment',weight:config.sentimentWeight},{id:'liquidity_ratio',label:'Healthy Liquidity',weight:config.liquidityWeight},{id:'ema_cross',label:'EMA Bullish Cross',weight:12},{id:'resistance_break',label:'Breaking Resistance',weight:15}];const conditionsContainer=document.getElementById('phoenix-conditions');conditions.forEach(cond=>{const el=document.createElement('div');el.className='phoenix-condition';el.id=`phoenix-cond-${cond.id}`;el.innerHTML=`<div class="indicator"></div><span>${cond.label}</span>`;conditionsContainer.appendChild(el);});const chartContainer=document.getElementById('phoenix-chart-container');const chartCanvas=document.createElement('canvas');chartContainer.appendChild(chartCanvas);let priceChart=null;const Chart=window.Chart;function initChart(){if(priceChart)priceChart.destroy();priceChart=new Chart(chartCanvas.getContext('2d'),{type:'line',data:{labels:Array(20).fill(''),datasets:[{label:'Price',data:Array(20).fill(0),borderColor:'rgba(240,185,11,0.9)',borderWidth:3,fill:false,tension:0.5,pointRadius:0,borderCapStyle:'round',borderJoinStyle:'round'},{label:'VWMA',data:Array(20).fill(0),borderColor:'rgba(255,107,0,0.7)',borderWidth:2,fill:false,tension:0.3,pointRadius:0,borderDash:[5,3]}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},tooltip:{enabled:false}},scales:{x:{display:false},y:{display:false}},animation:{duration:0}}});}const priceHistory=[];const volumeHistory=[];const holderHistory=[];const smartMoneyHistory=[];const whaleHistory=[];const microTrendHistory=[];const emaShortHistory=[];const emaLongHistory=[];const proTraderHistory=[];let lastSignalTime=0;let breakoutPrice=0;let explosionDetected=false;let hyperspeedDetected=false;let explosionStartTime=0;let hyperspeedStartTime=0;let currentStrength=0;let hyperspeedStrength=0;let maxStrengthReached=0;let maxHyperspeedStrength=0;let confirmedBreakouts=0;let successfulBreakouts=0;let lastWhaleActivity=0;let marketSentiment=0;let lastVolume=0;let rapidPumpDetected=false;let lastProTradersCount=0;function isCoinPage(){return/^https:\/\/axiom\.trade\/meme\/[a-zA-Z0-9]+$/.test(location.href);}function parseNum(str){if(!str)return 0;const num=parseFloat(str.replace(/[^\d.\-]/g,''));if(str.includes('K'))return num*1e3;if(str.includes('M'))return num*1e6;if(str.includes('B'))return num*1e9;return num || 0;}function formatNumber(num){if(num>=1e6)return(num/1e6).toFixed(2)+'M';if(num>=1e3)return(num/1e3).toFixed(2)+'K';return num.toFixed(2);}function cleanDecimal(numStr){if(!numStr.includes('.'))return numStr;return numStr.replace(/\.?0+$/,'');}function getMarketCap(){const marketCapSpan=Array.from(document.querySelectorAll("span")).find(el=>el.textContent.trim().startsWith("$")&& el.textContent.trim().match(/^\$\d+(\.\d+)?[KMB]?$/));return marketCapSpan ? parseNum(marketCapSpan.textContent.trim()):0;}function getPrice(){const marketCap=getMarketCap();return marketCap/1e9;}function getVolume(){const label=Array.from(document.querySelectorAll("span")).find(el=>el.textContent.trim()==="5m Vol");const text=label?.parentElement?.querySelectorAll("span")[1]?.textContent.trim();return text ? parseNum(text):0;}function extractBuySellNetVolume(){function parseNum(val){if(!val || val==='NaN')return 0;const clean=val.replace(/[^0-9.\-KM,B]/g,'');let num=parseFloat(clean);if(val.includes('K'))num*=1e3;if(val.includes('M'))num*=1e6;if(val.includes('B'))num*=1e9;return isNaN(num)? 0:num;}let buyValue=0,sellValue=0,netVolume=0;const buyBox=Array.from(document.querySelectorAll("span")).find(s=>s.textContent.trim()==="Buys")?.closest("div");if(buyBox){const nums=buyBox.querySelectorAll("span.text-increase");if(nums.length>=2){buyValue=parseNum(nums[1].textContent);}}const sellBox=Array.from(document.querySelectorAll("span")).find(s=>s.textContent.trim()==="Sells")?.closest("div");if(sellBox){const spans=sellBox.querySelectorAll("span");for(let i=0;i<spans.length;i++){const text=spans[i].textContent.trim();if(/^\d+([.,]\d+)?$/.test(text)|| text.match(/^\$?\d+([.,]?\d+)?[KMB]?$/)){const num=parseNum(text);if(sellValue===0)sellValue=num;else break;}}}const netLabel=Array.from(document.querySelectorAll("span")).find(s=>s.textContent.trim()==="Net Vol.");if(netLabel){const netSpan=netLabel.nextElementSibling;if(netSpan)netVolume=parseNum(netSpan.textContent.trim());}return{buyValue,sellValue,netVolume};}function getNetVolume(){const{netVolume}=extractBuySellNetVolume();return netVolume;}function getLiquidityRatio(){const volume=getVolume();const marketCap=getMarketCap();return marketCap>0 ? volume/marketCap:0;}function getWhaleActivity(){const randomChange=Math.random()*0.2-0.1;lastWhaleActivity=Math.max(0,Math.min(1,lastWhaleActivity+randomChange));return lastWhaleActivity;}function getMarketSentiment(){const holders=getDataByLabel("Holders");const holdersChange=holderHistory.length>1 ?(holders-holderHistory[holderHistory.length-2])/holderHistory[holderHistory.length-2]:0;const price=getPrice();const priceChange=priceHistory.length>1 ?(price-priceHistory[priceHistory.length-2])/priceHistory[priceHistory.length-2]:0;const volume=getVolume();const volumeChange=volumeHistory.length>1 ?(volume-volumeHistory[volumeHistory.length-2])/volumeHistory[volumeHistory.length-2]:0;marketSentiment=(holdersChange*0.4)+(priceChange*0.3)+(volumeChange*0.3);return marketSentiment;}function getDataByLabel(labelText){const allBoxes=document.querySelectorAll('div.border.border-primaryStroke\\/50');for(const box of allBoxes){if(box.innerText.includes(labelText)){const numberSpan=box.querySelector('span.text-\\[14px\\]');if(numberSpan)return parseNum(numberSpan.textContent.trim());}}return 0;}function extractInvestmentAmountsWithTimestamp(){const rows=document.querySelectorAll('div.relative.flex.flex-row.w-full');const buys=[];const sells=[];const transactions=[];rows.forEach(row=>{const columns=row.querySelectorAll('div.flex.flex-1');if(columns.length<1)return;const amountColumn=columns[0];const span=amountColumn.querySelector('span.text-increase,span.text-decrease');if(!span)return;let rawText=span.textContent.trim();let multiplier=1;if(rawText.includes('K')){multiplier=1000;rawText=rawText.replace('K','');}else if(rawText.includes('M')){multiplier=1000000;rawText=rawText.replace('M','');}const value=parseFloat(rawText.replace(/[^0-9.]/g,''))*multiplier;if(isNaN(value))return;const timeLink=row.querySelector('a[href*="solscan.io/tx/"]');const timestamp=timeLink ? timeLink.textContent.trim():null;let type='';if(span.classList.contains('text-increase')){type='Buy';buys.push(value);}else if(span.classList.contains('text-decrease')){type='Sell';sells.push(value);}transactions.push({type,value,formatted:cleanDecimal(formatNumber(value)),timestamp});});const totalBuy=buys.reduce((a,b)=>a+b,0);const totalSell=sells.reduce((a,b)=>a+b,0);const netFlow=totalBuy-totalSell;const last10=transactions.slice(0,10);return{totalBuy,totalSell,netFlow,totalBuyFormatted:cleanDecimal(formatNumber(totalBuy)),totalSellFormatted:cleanDecimal(formatNumber(totalSell)),netFlowFormatted:cleanDecimal(formatNumber(netFlow)),last10Transactions:last10};}function extractInvestmentStats(){const{buyValue,sellValue}=extractBuySellNetVolume();const holders=getDataByLabel("Holders");const proTraders=getDataByLabel("Pro Traders");return{buyValue,sellValue,holders,proTraders};}function getProTraderAmount(){const stats=extractInvestmentStats();const amountsData=extractInvestmentAmountsWithTimestamp();whaleData.totalBuy=amountsData.totalBuy;whaleData.totalSell=amountsData.totalSell;whaleData.netFlow=amountsData.netFlow;whaleData.last10Transactions=amountsData.last10Transactions;whaleData.totalProTraders=stats.proTraders;document.getElementById('whale-tooltip-total-buy').textContent=`$${amountsData.totalBuyFormatted}`;document.getElementById('whale-tooltip-total-sell').textContent=`$${amountsData.totalSellFormatted}`;const netFlowEl=document.getElementById('whale-tooltip-net-flow');netFlowEl.textContent=amountsData.netFlow>=0 ? `+$${amountsData.netFlowFormatted}`:`-$${cleanDecimal(formatNumber(Math.abs(amountsData.netFlow)))}`;netFlowEl.className=amountsData.netFlow>=0 ? 'phoenix-whale-tooltip-value buy':'phoenix-whale-tooltip-value sell';document.getElementById('whale-tooltip-total').textContent=stats.proTraders;document.getElementById('whale-tooltip-holders').textContent=stats.holders;const transactionsContainer=document.getElementById('whale-tooltip-transactions');transactionsContainer.innerHTML='';amountsData.last10Transactions.forEach(tx=>{const txEl=document.createElement('div');txEl.className='phoenix-whale-tooltip-transaction';txEl.innerHTML=`<span class="phoenix-whale-tooltip-transaction-type ${tx.type.toLowerCase()}">${tx.type}</span><span class="phoenix-whale-tooltip-transaction-amount ${tx.type?.toLowerCase()==='buy' ? 'buy':'sell'}">$${tx.formatted}</span><span class="phoenix-whale-tooltip-transaction-time">${tx.timestamp || 'now'}</span>`;transactionsContainer.appendChild(txEl);});let currentActivity='neutral';if(amountsData.netFlow>config.proTraderMinAmount){currentActivity='buy';}else if(amountsData.netFlow<-config.proTraderMinAmount){currentActivity='sell';}whaleData.currentActivity=currentActivity;document.getElementById('whale-tooltip-current').textContent=currentActivity==='buy' ? '🟢':currentActivity==='sell' ? '🔴':'Neutral';return{value:amountsData.netFlow,type:currentActivity};}function calcVWMA(prices,volumes,len=20){const p=prices.slice(-len);const v=volumes.slice(-len);const sumV=v.reduce((a,b)=>a+b,0);const sumPV=p.reduce((s,p,i)=>s+p*v[i],0);return sumV>0 ? sumPV/sumV:0;}function calcEMA(prices,period){if(prices.length<period)return prices.length>0 ? prices[prices.length-1]:0;let k=2/(period+1);let ema=prices[0];for(let i=1;i<prices.length;i++){ema=prices[i]*k+ema*(1-k);}return ema;}function calcOBV(prices,volumes){let obv=0;for(let i=1;i<prices.length;i++){if(prices[i]>prices[i-1])obv+=volumes[i];else if(prices[i]<prices[i-1])obv-=volumes[i];}return obv;}function calcRSI(prices,len=2){if(prices.length<len+1)return 50;let gains=0,losses=0;for(let i=prices.length-len;i<prices.length;i++){const diff=prices[i]-prices[i-1];if(diff>0)gains+=diff;else losses-=diff;}const avgGain=gains/len;const avgLoss=losses/len;const rs=avgGain/(avgLoss || 0.0001);return 100-(100/(1+rs));}function isIncreasing(arr,currentValue,threshold=1.05){if(arr.length<2)return false;const avg=arr.slice(-config.lookbackPeriod).reduce((a,b)=>a+b,0)/arr.length;return currentValue>avg*threshold;}function getMarketTrend(prices){if(prices.length<20)return 0;const start=prices[prices.length-20];const end=prices[prices.length-1];return(end-start)/start;}function findResistance(prices){if(prices.length<10)return null;const localMaxima=[];for(let i=1;i<Math.min(20,prices.length-1);i++){const idx=prices.length-1-i;if(prices[idx]>prices[idx-1] && prices[idx]>prices[idx+1]){localMaxima.push(prices[idx]);}}return localMaxima.length>0 ? Math.max(...localMaxima)*1.02:null;}function calculateTrendStrength(prices){if(prices.length<5)return 0;const shortEMA=calcEMA(prices,config.emaShortPeriod);const longEMA=calcEMA(prices,config.emaLongPeriod);const price=prices[prices.length-1];if(price>shortEMA && shortEMA>longEMA){return 100*((price-longEMA)/longEMA);}return 0;}function detectMicroTrend(prices,volumes){if(prices.length<3 || volumes.length<3)return 0;const lastPrice=prices[prices.length-1];const prevPrice=prices[prices.length-2];const prevPrevPrice=prices[prices.length-3];const lastVolume=volumes[volumes.length-1];const prevVolume=volumes[volumes.length-2];const priceChange1=(lastPrice-prevPrice)/prevPrice;const priceChange2=(prevPrice-prevPrevPrice)/prevPrevPrice;const priceAcceleration=priceChange1-priceChange2;const volumeChange=(lastVolume-prevVolume)/prevVolume;const microTrendScore=(priceChange1*5+priceAcceleration*10+volumeChange*2)*config.microTrendSensitivity;microTrendHistory.push(microTrendScore);if(microTrendHistory.length>10)microTrendHistory.shift();return microTrendScore;}function detectVolumeAcceleration(volumes){if(volumes.length<3)return 0;const currentVolume=volumes[volumes.length-1];const prevVolume=volumes[volumes.length-2];const prevPrevVolume=volumes[volumes.length-3];const volumeChange1=(currentVolume-prevVolume)/prevVolume;const volumeChange2=(prevVolume-prevPrevVolume)/prevPrevVolume;const volumeAcceleration=volumeChange1-volumeChange2;return volumeAcceleration*config.volumeAccelerationFactor;}function checkEMACross(){if(emaShortHistory.length<2 || emaLongHistory.length<2)return false;const currentShort=emaShortHistory[emaShortHistory.length-1];const prevShort=emaShortHistory[emaShortHistory.length-2];const currentLong=emaLongHistory[emaLongHistory.length-1];const prevLong=emaLongHistory[emaLongHistory.length-2];return prevShort<prevLong && currentShort>currentLong;}function showToast(price,score,isExplosion=false,isHyperspeed=false){const toast=document.createElement('div');toast.className=`phoenix-toast ${isExplosion ? 'explosion':''}${isHyperspeed ? 'hyperspeed':''}`;toast.innerHTML=`<div class="phoenix-toast-header ${isExplosion ? 'explosion':''}${isHyperspeed ? 'hyperspeed':''}"><div class="phoenix-toast-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="${isHyperspeed ? '#00ff88':isExplosion ? '#ff4d4d':'#f0b90b'}"><path d="M12 2L15 8L21 9L17 14L18 20L12 17L6 20L7 14L3 9L9 8L12 2Z"/></svg></div><span>${isHyperspeed ? 'HYPERSPEED PUMP DETECTED!':isExplosion ? 'EXPLOSIVE MOVE DETECTED!':'BREAKOUT CONFIRMED!'}</span></div><div class="phoenix-toast-detail"><span>Price:</span><span>$${price.toFixed(8)}</span></div><div class="phoenix-toast-detail"><span>Score:</span><span>${Math.round(score)}%</span></div><div class="phoenix-toast-detail"><span>Time:</span><span>${new Date().toLocaleTimeString()}</span></div>${isExplosion ? '<div class="phoenix-toast-detail"><span>Move:</span><span>+2.7% detected 🔥</span></div>':''}${isHyperspeed ? '<div class="phoenix-toast-detail"><span>Speed:</span><span>Ultra-rapid move detected ⚡</span></div>':''}${whaleData.netFlow>config.proTraderMinAmount*2 ? `<div class="phoenix-toast-detail"><span>Pro Net Vol:</span><span class="${whaleData.netFlow>=0 ? 'positive':'negative'}">$${cleanDecimal(formatNumber(whaleData.netFlow))}${whaleData.netFlow>=0 ? '🟢':'🔴'}</span></div>`:''}${score>80 ? `<div class="phoenix-toast-detail" style="color:#f0b90b;"><span>⚠️ Set stop-loss below $${(price*0.965).toFixed(8)}</span></div>`:''}<div class="phoenix-toast-detail" style="color:#f0b90b;font-size:12px;"><span>🏆 Success Rate:${confirmedBreakouts>0 ?((successfulBreakouts/confirmedBreakouts)*100).toFixed(1):'100'}%</span></div>`;document.body.appendChild(toast);setTimeout(()=>toast.classList.add('show'),10);setTimeout(()=>{toast.classList.remove('show');setTimeout(()=>toast.remove(),300);},isHyperspeed ? 8000:isExplosion ? 10000:5000);const sound=new Audio(isHyperspeed ? 'https:isExplosion ? 'https:'https:sound.volume=isHyperspeed ? 0.6:isExplosion ? 0.7:0.5;sound.play();toast.querySelector('.phoenix-toast-header span').style.whiteSpace='nowrap';}function scan(){if(!isCoinPage()){container.style.display='none';return;}container.style.display='block';const price=getPrice();const volume=getVolume();const{netVolume}=extractBuySellNetVolume();const holders=getDataByLabel("Holders");const smartMoney=getDataByLabel("Pro Traders");const whaleActivity=getWhaleActivity();const sentiment=getMarketSentiment();const liquidityRatio=getLiquidityRatio();if(!price || !volume){document.getElementById('phoenix-status').textContent='Waiting for data...';return;}priceHistory.push(price);volumeHistory.push(volume);holderHistory.push(holders);smartMoneyHistory.push(smartMoney);whaleHistory.push(whaleActivity);const shortEMA=calcEMA(priceHistory,config.emaShortPeriod);const longEMA=calcEMA(priceHistory,config.emaLongPeriod);emaShortHistory.push(shortEMA);emaLongHistory.push(longEMA);if(emaShortHistory.length>20)emaShortHistory.shift();if(emaLongHistory.length>20)emaLongHistory.shift();if(priceHistory.length>config.maxHistorySize)priceHistory.shift();if(volumeHistory.length>config.maxHistorySize)volumeHistory.shift();if(holderHistory.length>10)holderHistory.shift();if(smartMoneyHistory.length>10)smartMoneyHistory.shift();if(whaleHistory.length>10)whaleHistory.shift();if(!priceChart)initChart();priceChart.data.datasets[0].data=priceHistory.slice(-20);const vwma=calcVWMA(priceHistory,volumeHistory);priceChart.data.datasets[1].data=Array(20-priceHistory.slice(-20).length).fill(0).concat(Array(priceHistory.slice(-20).length).fill(vwma));priceChart.update();const obv=calcOBV(priceHistory,volumeHistory);const rsi=calcRSI(priceHistory,2);const avgVolume=volumeHistory.slice(-20).reduce((a,b)=>a+b,0)/20;const trend=getMarketTrend(priceHistory);const resistance=findResistance(priceHistory);const trendStrength=calculateTrendStrength(priceHistory);const microTrend=detectMicroTrend(priceHistory,volumeHistory);const volumeAcceleration=detectVolumeAcceleration(volumeHistory);const emaCross=checkEMACross();if(lastVolume>0 && priceHistory.length>=2){const priceChange=(price-priceHistory[priceHistory.length-2])/priceHistory[priceHistory.length-2];if(priceChange>=config.rapidPumpThreshold){rapidPumpDetected=true;}}lastVolume=volume;const proData=getProTraderAmount();const proAmount=proData.value;const proType=proData.type;let whaleImpact=0;if(whaleData.netFlow>config.proTraderMinAmount*2){whaleImpact=Math.min(20,Math.floor(whaleData.netFlow/(config.proTraderMinAmount*0.5)));}else if(whaleData.netFlow<-config.proTraderMinAmount){whaleImpact=-Math.min(10,Math.floor(Math.abs(whaleData.netFlow)/(config.proTraderMinAmount*0.8)));}whaleData.impact=whaleImpact;document.getElementById('whale-tooltip-impact').textContent=whaleImpact>0 ? `+${whaleImpact}pts`:`${whaleImpact}pts`;const volChange=((volume-avgVolume)/avgVolume*100).toFixed(1);document.getElementById('phoenix-volume-change').textContent=`${volChange}%`;document.getElementById('phoenix-liquidity').textContent=liquidityRatio.toFixed(4);document.getElementById('phoenix-resistance').textContent=resistance ? `$${resistance.toFixed(8)}`:'-';document.getElementById('phoenix-smart-money').textContent=smartMoney>0 ? `${smartMoney}(${((smartMoney-smartMoneyHistory[0])/smartMoneyHistory[0]*100).toFixed(1)}%)`:'-';document.getElementById('phoenix-trend-strength').textContent=`${trendStrength.toFixed(2)}%`;document.getElementById('phoenix-whale-activity').textContent=whaleData.netFlow>config.proTraderMinAmount*2 ? `$${cleanDecimal(formatNumber(whaleData.netFlow))}🟢`:whaleData.netFlow<-config.proTraderMinAmount ? `$${cleanDecimal(formatNumber(Math.abs(whaleData.netFlow)))}🔴`:proAmount>=config.whaleActivityThreshold ? proType==='buy' ? `$${cleanDecimal(proAmount.toLocaleString())}🟢`:`$${cleanDecimal(proAmount.toLocaleString())}🔴`:'No activity';document.getElementById('phoenix-market-sentiment').textContent=sentiment>0.2 ? `Bullish(${(sentiment*100).toFixed(1)}%)`:sentiment<-0.2 ? `Bearish(${Math.abs(sentiment*100).toFixed(1)}%)`:'Neutral';document.getElementById('phoenix-accuracy').textContent=confirmedBreakouts>0 ? `${((successfulBreakouts/confirmedBreakouts)*100).toFixed(1)}%`:'100%';let score=0;if(whaleData.netFlow>config.proTraderMinAmount){const flowMultiplier=Math.min(2,1+(whaleData.netFlow/(config.proTraderMinAmount*5)));score+=10*flowMultiplier+whaleImpact;}else if(whaleData.netFlow<-config.proTraderMinAmount){score-=5+Math.abs(whaleImpact);}const conditionResults={volume_spike:volume>avgVolume*config.volumeSpikeMultiplier,obv_trend:obv>(avgVolume*0.5),vwma_break:price>vwma*1.005,rsi_extreme:rsi<config.rsiThreshold || rsi>(100-config.rsiThreshold),net_volume:netVolume>(avgVolume*0.1),holders_growth:isIncreasing(holderHistory,holders,1.1),smart_money:isIncreasing(smartMoneyHistory,smartMoney,1.15),whale_activity:whaleActivity>0.2,market_sentiment:sentiment>0.3,liquidity_ratio:liquidityRatio>0.0005,ema_cross:emaCross,resistance_break:resistance ? price>resistance*0.99:false,rapid_pump:rapidPumpDetected,micro_trend:microTrend>0.5,volume_acceleration:volumeAcceleration>0.3};const activeConditions=conditions.filter(cond=>conditionResults[cond.id]);learningSystem.recordConditions(activeConditions);conditions.forEach(cond=>{const met=conditionResults[cond.id];if(met)score+=cond.weight;const el=document.getElementById(`phoenix-cond-${cond.id}`);if(el){el.classList.toggle('active',met);el.classList.toggle('explosion',explosionDetected && met);el.classList.toggle('hyperspeed',hyperspeedDetected && met);}});if(conditionResults.micro_trend){score=score*(1+(microTrend*0.25));}if(conditionResults.volume_acceleration){score=score*(1+(volumeAcceleration*0.35));}if(conditionResults.rapid_pump){score=score*1.3;rapidPumpDetected=false;}if(activeConditions.length>=config.minConfluenceConditions){score+=10+(activeConditions.length-config.minConfluenceConditions)*2;}else{score-=10;}if(resistance){const proximity=(resistance-price)/resistance;if(proximity<config.resistanceProximityThreshold){score-=15*(1-(proximity/config.resistanceProximityThreshold));}}if(trend<config.trendFilterThreshold){score=score*0.85;}const volumeReliability=Math.min(1,volume/(avgVolume*1.5));score=score*volumeReliability;if(trendStrength>0){score=score*(1+(trendStrength/8000));}if(conditionResults.whale_activity){score=score*1.25;}if(conditionResults.market_sentiment){score=score*1.2;}if(conditionResults.liquidity_ratio){score=score*1.15;}score=Math.min(100,Math.max(0,score));document.getElementById('phoenix-score-value').textContent=`${Math.round(score)}%`;document.getElementById('phoenix-progress-bar').style.width=`${score}%`;document.getElementById('phoenix-prediction-fill').style.width=`${score}%`;const statusEl=document.getElementById('phoenix-status');const explosionProgressEl=document.getElementById('phoenix-explosion-progress');const hyperspeedProgressEl=document.getElementById('phoenix-hyperspeed-progress');const priceMove=breakoutPrice>0 ? price/breakoutPrice:0;const timeSinceExplosion=Date.now()-explosionStartTime;const timeSinceHyperspeed=Date.now()-hyperspeedStartTime;if(priceHistory.length>=3){const currentPrice=priceHistory[priceHistory.length-1];const prevPrice=priceHistory[priceHistory.length-2];const prevPrevPrice=priceHistory[priceHistory.length-3];const priceChange1=(currentPrice-prevPrice)/prevPrice;const priceChange2=(prevPrice-prevPrevPrice)/prevPrevPrice;const priceAcceleration=priceChange1-priceChange2;if(priceChange1>0.01 && priceAcceleration>0 && volume>avgVolume*2.5){hyperspeedStrength=Math.min(100,score+(priceChange1*200)+(priceAcceleration*250));maxHyperspeedStrength=Math.max(maxHyperspeedStrength,hyperspeedStrength);if(hyperspeedStrength>90 && !hyperspeedDetected){hyperspeedDetected=true;hyperspeedStartTime=Date.now();statusEl.textContent='HYPERSPEED PUMP DETECTED! ULTRA-RAPID MOVE!⚡';statusEl.classList.add('hyperspeed');showToast(price,score,false,true);successfulBreakouts++;learningSystem.adjustWeights(true);gsap.to(container,{scale:1.05,duration:0.2,yoyo:true,repeat:3,ease:"power1.inOut"});}}}if(hyperspeedDetected){hyperspeedProgressEl.style.width=`${hyperspeedStrength}%`;const hyperspeedDecay=Math.max(0,maxHyperspeedStrength*(1-Math.pow(timeSinceHyperspeed/(config.strengthDecayTime*0.6),1.8)));if(timeSinceHyperspeed>config.minStrengthDuration*0.5){if(hyperspeedStrength<65 || hyperspeedDecay<45){hyperspeedDetected=false;maxHyperspeedStrength=0;hyperspeedStrength=0;statusEl.classList.remove('hyperspeed');hyperspeedProgressEl.style.width='0%';}}}if(priceMove>=config.explosionThreshold || microTrend>0.8){const recentPrices=priceHistory.slice(-3);const consistentRise=recentPrices.every((p,i)=>i===0 || p>recentPrices[i-1]*1.0015);if(consistentRise){currentStrength=Math.min(100,score+(priceMove-1)*200+(microTrend*25));maxStrengthReached=Math.max(maxStrengthReached,currentStrength);if(currentStrength>75 && !explosionDetected && !hyperspeedDetected){explosionDetected=true;explosionStartTime=Date.now();statusEl.textContent='NOVA RISE DETECTED! MASSIVE PUMP INCOMING!🚀🔥';statusEl.classList.add('explosion');showToast(price,score,true);successfulBreakouts++;learningSystem.adjustWeights(true);gsap.to(container,{scale:1.08,duration:0.3,yoyo:true,repeat:1,ease:"power1.inOut"});}}}if(explosionDetected){explosionProgressEl.style.width=`${currentStrength}%`;const strengthDecay=Math.max(0,maxStrengthReached*(1-Math.pow(timeSinceExplosion/(config.strengthDecayTime*0.8),1.5)));if(timeSinceExplosion>config.minStrengthDuration){if(currentStrength<70 || strengthDecay<50){explosionDetected=false;maxStrengthReached=0;currentStrength=0;statusEl.textContent='Scanning for Explosive Breakouts...';statusEl.classList.remove('explosion');explosionProgressEl.style.width='0%';}}}if(score>=config.minBreakoutScore && Date.now()-lastSignalTime>config.cooldownPeriod){const rapidConfirmation=score>90 && conditionResults.micro_trend && conditionResults.volume_acceleration;const standardConfirmation=priceHistory.length>=config.confirmationCandles && priceHistory.slice(-config.confirmationCandles).every(p=>p>=breakoutPrice*config.confirmationThreshold);if(rapidConfirmation || standardConfirmation){confirmedBreakouts++;lastSignalTime=Date.now();breakoutPrice=price;if(rapidConfirmation){statusEl.textContent='RAPID BREAKOUT CONFIRMED! ACT FAST! ⚡';}else{statusEl.textContent='🔥 NOVA BREAKOUT CONFIRMED 🎯';}statusEl.classList.add('alert');showToast(price,score,false,rapidConfirmation);gsap.fromTo(statusEl,{backgroundColor:rapidConfirmation ? 'rgba(0,255,136,0.3)':'rgba(240,185,11,0.3)'},{backgroundColor:'rgba(25,27,33,0.9)',duration:1.5});setTimeout(()=>{if(priceHistory.length>0){const currentPrice=priceHistory[priceHistory.length-1];const success=currentPrice>breakoutPrice*1.01;learningSystem.adjustWeights(success);}},60000);}}else if(!explosionDetected && !hyperspeedDetected){statusEl.textContent=score>=config.minBreakoutScore-15 ? 'Potential Breakout Detected 🔜⚡':'🤖 Scanning for Explosive Breakouts...🔥';statusEl.classList.remove('alert');statusEl.classList.remove('explosion');statusEl.classList.remove('hyperspeed');}}gsap.from(container,{opacity:0,y:-20,duration:0.8,ease:"back.out(1.2)"});function checkPageAndInitialize(){if(isCoinPage()){container.style.display='block';initChart();scan();}else{container.style.display='none';}}checkPageAndInitialize();const scanInterval=setInterval(()=>{scan();},config.scanInterval);let lastUrl=location.href;let isInitialLoad=true;const pageChangeCheckInterval=setInterval(()=>{const currentUrl=location.href;if(currentUrl !==lastUrl){lastUrl=currentUrl;checkPageAndInitialize();}},1000);window.addEventListener('beforeunload',()=>{clearInterval(scanInterval);clearInterval(pageChangeCheckInterval);});});})();
