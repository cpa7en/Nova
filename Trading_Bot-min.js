(function(){'use strict';const WALLET_KEY='axiom_demo_wallet_balance';const PANEL_BALANCE_KEY='axiom_demo_panel_balance';const TP_PERCENTAGE_KEY='tp_percentage';const TP_ENABLED_KEY='tp_enabled';const SL_ENABLED_KEY='sl_enabled';const SL_VALUE_KEY='sl_value';const PANEL_POSITION_KEY='panel_position';const TOGGLE_POSITION_KEY='toggle_position';const TRADING_STATE_KEY='trading_state';const TRADE_LOG_KEY='trade_log_history';const getWalletBalance=()=>parseFloat(sessionStorage.getItem(WALLET_KEY))||parseFloat(localStorage.getItem(WALLET_KEY))||0;const setWalletBalance=(amount)=>{localStorage.setItem(WALLET_KEY,amount.toFixed(2));sessionStorage.setItem(WALLET_KEY,amount.toFixed(2))};const getPanelBalance=()=>parseFloat(sessionStorage.getItem(PANEL_BALANCE_KEY))||0;const setPanelBalance=(amount)=>sessionStorage.setItem(PANEL_BALANCE_KEY,amount.toFixed(2));const loadPosition=(key,defaults)=>{const saved=localStorage.getItem(key);return saved?JSON.parse(saved):defaults};const loadTradingState=()=>{const saved=sessionStorage.getItem(TRADING_STATE_KEY);if(saved){const state=JSON.parse(saved);return{balance:state.balance||0,holding:state.holding||0,invested:state.invested||0,sold:state.sold||0,pnl:state.pnl||0,lastPercentage:state.lastPercentage||0}}return{balance:0,holding:0,invested:0,sold:0,pnl:0,lastPercentage:0}};const saveTradingState=(state)=>{sessionStorage.setItem(TRADING_STATE_KEY,JSON.stringify(state))};const loadTradeLog=()=>{const saved=sessionStorage.getItem(TRADE_LOG_KEY);return saved?JSON.parse(saved):[]};const saveTradeLog=(log)=>{sessionStorage.setItem(TRADE_LOG_KEY,JSON.stringify(log))};let tradingState=loadTradingState();let balance=tradingState.balance;let holding=tradingState.holding;let invested=tradingState.invested;let sold=tradingState.sold;let pnl=tradingState.pnl;let lastPercentage=tradingState.lastPercentage;let tradeLog=loadTradeLog();const buySound=new Audio("https://files.catbox.moe/m27h0b.mp3");const sellSound=new Audio("https://files.catbox.moe/xylqr9.mp3");const resetSound=new Audio("https://files.catbox.moe/5nouax.mp3");const transferSound=new Audio("https://files.catbox.moe/zdsr75.mp3");const geistFont=document.createElement('link');geistFont.href='https://fonts.googleapis.com/css2?family=Geist:wght@400;600&display=swap';geistFont.rel='stylesheet';document.head.appendChild(geistFont);const style=document.createElement('style');style.textContent=` .demo-trader{position:fixed;top:106.5px;left:292px;width:350px;background:#121212;color:#eee;border-radius:14px;padding:16px;z-index:9999;font-family:'Geist',sans-serif;box-shadow:0 0 18px #0ff3;resize:both;overflow:auto;cursor:default;border:1px solid #2a2a2a;transform:scale(.9);transform-origin:top left;display:none}.demo-trader:hover{box-shadow:0 0 20px #0ff6;border-color:#3a3a3a}.demo-trader h3{text-align:center;margin:0 0 10px;color:cyan;font-size:18px;font-weight:600}.demo-trader .row{display:flex;justify-content:space-between;flex-wrap:wrap;margin-bottom:6px;font-size:16px}.demo-trader .row.buttons{justify-content:center;gap:0;margin-bottom:10px}.demo-trader button{margin:4px;padding:6px 14px;border-radius:20px;font-size:16px;font-weight:600;cursor:pointer;background:#fff0;border:2px solid;transition:all 0.2s ease-in-out;min-width:60px;font-family:'Geist',sans-serif}.buy-btn{border-color:#0f9;color:#0f9}.buy-btn:hover{background:#00ff9940;transform:scale(1.05)}.sell-btn{border-color:#f39;color:#f39}.sell-btn:hover{background:#ff339940;transform:scale(1.05)}.wallet-actions{position:absolute;top:6px;right:6px;display:flex;flex-direction:column;gap:4px}.wallet-actions button{background:none;border:none;font-size:15px;cursor:pointer;color:#ccc;padding:0;transition:transform 0.2s;line-height:1}.wallet-actions button:hover{transform:scale(1.2);color:#fff}.popup-overlay{position:absolute;top:100%;left:25px;background:#1a1a1a;padding:10px;border:1px solid #444;border-radius:10px;box-shadow:0 0 10px #00bfff66;margin-top:8px;z-index:9999}.popup-overlay input{width:100px;padding:4px 8px;margin-right:8px;border-radius:6px;border:1px solid #333;background:#222;color:#fff;font-family:'Geist',sans-serif}.popup-overlay button{padding:4px 10px;border-radius:6px;border:none;cursor:pointer;font-weight:600;font-size:13px;margin-left:4px;font-family:'Geist',sans-serif}.popup-overlay .add{background:#00bfff;color:#000}.popup-overlay .cancel{background:#444;color:#fff}.log{margin-top:10px;max-height:90px;overflow-y:auto;font-size:13px;border-top:1px solid #444;padding-top:12px}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}.panel-toggle{position:fixed;top:107px;left:845px;background-color:#121212;border:1px solid #3b82f6;color:#3b82f6;border-radius:9999px;padding:6px 12px;z-index:999999;font-size:14px;font-family:'Geist',sans-serif;display:flex;align-items:center;user-select:none;backdrop-filter:blur(4px);cursor:pointer;transition:all 0.2s ease;display:none}.panel-toggle:hover{background-color:#1a1a1a;transform:scale(1.05)}.tp-sl-popup{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#1e1e1e;border:1px solid #444;border-radius:12px;box-shadow:0 0 12px #00bfff88;padding:16px;width:240px;z-index:9999;font-family:'Geist',sans-serif}.input-box{width:100%;padding:6px 10px;border-radius:8px;border:1px solid #333;background:#222;color:#fff;margin-bottom:8px}.checkbox-label{font-size:13px;display:inline-block;margin-bottom:15px;color:#eee}.wallet-card{position:relative;background:linear-gradient(135deg,#00bfff66,#1e90ff66);border-radius:12px;padding:10px 14px 16px 14px;display:flex;align-items:center;gap:10px;margin-bottom:12px;box-shadow:0 0 10px #00bfff66}@media (max-width:768px){.demo-trader{transform:scale(.8);left:20px!important;top:20px!important}.panel-toggle{left:20px!important;top:80px!important}}.control-icon{font-size:14px;cursor:pointer;opacity:.8;transition:all 0.2s ease;background:#222;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border:1px solid #444}.control-icon:hover{opacity:1;transform:scale(1.1);background:#333}#tp-settings-icon{color:#00bfff}#settings-icon{color:#fc0}#close-panel{color:#f44}.panel-header{position:relative;height:40px;margin-bottom:8px;display:flex;align-items:center}.logo-container{flex-grow:1;margin-top:-15px;text-align:center}.control-icons-container{position:absolute;margin-top:-21px;right:0;display:flex;gap:5px;border-radius:20px}.logo-img{height:35px;border-radius:5px;margin-top:-2px}`;document.head.appendChild(style);const panel=document.createElement('div');panel.className='demo-trader';panel.innerHTML=` <div class="panel-header"><div class="logo-container"><img src="https://i.ibb.co/jxYvT8x/axiom.png" alt="AXIOM Demo Logo" class="logo-img" /></div><div class="control-icons-container"><span id="wallet-icon" class="control-icon" title="Transfer Funds">üíº</span><span id="tp-settings-icon" class="control-icon" title="TP/SL Settings">üéØ</span><span id="settings-icon" class="control-icon" title="Reset Dash">‚öôÔ∏è</span><span id="close-panel" class="control-icon" title="Close Dash">‚úñ</span></div></div><div class="wallet-card"><span style="font-size: 20px;">üí≥</span><div style="flex: 1;"><div style="font-size: 12px; color: #eee; opacity: 0.8;">Wallet Balance</div><div id="wallet-card-amount" style="font-size: 16px; font-weight: 600; color: #fff;">$0</div></div><div class="wallet-actions"><button id="add-funds" title="Add Funds">‚ûï</button><button id="clear-funds">üóëÔ∏è</button></div></div><div id="popup-container" style="position: relative;"></div><div class="row"><span class="label">Balance:</span><span id="demo-balance">$0</span></div><div class="row"><span class="label">Bought:</span><span id="demo-invested">$0</span></div><div class="row"><span class="label">Holding:</span><span id="demo-holding">$0</span></div><div class="row"><span class="label">Sold:</span><span id="demo-sold">$0</span></div><div class="row" style="margin-bottom: 12px;"><span class="label">PNL:</span><span id="demo-pnl">$0</span></div><div class="row buttons"><button class="buy-btn" data-amount="150">150</button><button class="buy-btn" data-amount="200">200</button><button class="buy-btn" data-amount="250">250</button><button class="buy-btn" data-amount="300">300</button></div><div class="row buttons"><button class="sell-btn" data-pct="25">25</button><button class="sell-btn" data-pct="50">50</button><button class="sell-btn" data-pct="75">75</button><button class="sell-btn" data-pct="100">100</button></div><div class="log" id="trade-log"></div><!-- TP/SL Popup --><div id="tp-popup" class="tp-sl-popup"><div style="font-size: 15px; font-weight: 600; margin-bottom: 10px;">üéØ Take Profit</div><input type="number" id="tp-input" placeholder="Profit %" class="input-box" /><label class="checkbox-label"><input type="checkbox" id="tp-checkbox" style="margin-right: 6px;" />Enable Auto TP </label><div style="font-size: 15px; font-weight: 600; margin-bottom: 10px;">üõë Stop Loss</div><input type="number" id="sl-input" placeholder="Loss %" class="input-box" /><label class="checkbox-label"><input type="checkbox" id="sl-checkbox" style="margin-right: 6px;" />Enable Auto SL </label><div style="margin-top: 14px; display: flex; justify-content: center; gap: 10px;"><button id="tp-save" style="background: #00bfff; color: #000; border: none; padding: 5px 12px; border-radius: 6px; font-weight: bold; cursor: pointer;">Save</button><button id="tp-cancel" style="background: #444; color: #fff; border: none; padding: 5px 12px; border-radius: 6px; cursor: pointer;">Cancel</button></div></div>`;document.body.appendChild(panel);const toggleBtn=document.createElement('div');toggleBtn.className='panel-toggle';toggleBtn.textContent='üìä';document.body.appendChild(toggleBtn);const savedPanelPos=loadPosition(PANEL_POSITION_KEY,{top:'106.5px',left:'292px'});const savedTogglePos=loadPosition(TOGGLE_POSITION_KEY,{top:'107px',left:'845px'});panel.style.top=savedPanelPos.top;panel.style.left=savedPanelPos.left;toggleBtn.style.top=savedTogglePos.top;toggleBtn.style.left=savedTogglePos.left;const format=n=>{const val=parseFloat(n);if(isNaN(val))return"$0";if(val%1===0){return"$"+val.toLocaleString()}else{return"$"+val.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/0+$/,'').replace(/\.$/,'')}};const updateUI=()=>{const wallet=getWalletBalance();const mc=parseMarketCap(getMarketCap());const holdingValue=holding*mc;if(holding>0&&invested>0&&mc>0){pnl=holdingValue-invested;lastPercentage=(pnl/invested)*100}document.getElementById("wallet-card-amount").textContent=format(wallet);document.getElementById("demo-balance").textContent=format(balance);document.getElementById("demo-invested").textContent=format(invested);document.getElementById("demo-holding").textContent=format(holdingValue);document.getElementById("demo-sold").textContent=format(sold);const pnlEl=document.getElementById("demo-pnl");pnlEl.innerHTML=`<strong>${pnl>=0 ? '+':''}${format(pnl)}</strong><strong>(${lastPercentage.toFixed(2)}%)</strong>`;pnlEl.style.color=pnl>=0?'#0f0':'#f00';setPanelBalance(balance);saveTradingState({balance,holding,invested,sold,pnl,lastPercentage})};const getMarketCap=()=>{const regex=/\$[\d,.]+([KMB])?/;const span=Array.from(document.querySelectorAll("*")).find(el=>regex.test(el.textContent.trim()));return span?span.textContent.trim().match(regex)[0]:"$1"};const parseMarketCap=(txt)=>{if(!txt||txt==="$0")return 0;const mul=txt.endsWith("K")?1e3:txt.endsWith("M")?1e6:txt.endsWith("B")?1e9:1;const value=parseFloat(txt.replace("$","").replace(/[KMB]/,""));return isNaN(value)?0:value*mul};const logTrade=msg=>{const log=document.getElementById("trade-log");const line=document.createElement("div");line.innerHTML=msg;log.prepend(line);tradeLog.unshift(msg);if(tradeLog.length>50)tradeLog.pop();saveTradeLog(tradeLog)};const restoreTradeLog=()=>{const log=document.getElementById("trade-log");log.innerHTML='';tradeLog.forEach(msg=>{const line=document.createElement("div");line.innerHTML=msg;log.appendChild(line)})};document.getElementById("add-funds").onclick=()=>{const container=document.getElementById("popup-container");container.innerHTML=` <div class="popup-overlay"><input type="text" id="fund-amount" placeholder="$" min="1" /><button class="add">Add</button><button class="cancel">Cancel</button></div>`;container.querySelector(".add").onclick=()=>{const val=parseFloat(document.getElementById("fund-amount").value);if(!isNaN(val)&&val>0){const newBal=getWalletBalance()+val;setWalletBalance(newBal);updateUI();logTrade(`ü§ë Added $${val.toLocaleString()}to wallet.`);sellSound.play()}container.innerHTML=''};container.querySelector(".cancel").onclick=()=>{container.innerHTML=''}};document.getElementById("clear-funds").onclick=()=>{if(confirm("Clear your wallet balance?")){setWalletBalance(0);updateUI();logTrade("üóëÔ∏è Wallet balance cleared");resetSound.play()}};document.getElementById("wallet-icon").onclick=()=>{const walletBalance=getWalletBalance();let transferred=!1;if(walletBalance>0){balance+=walletBalance;setWalletBalance(0);logTrade("üíµ Balance loaded to panel.");transferred=!0}else if(balance>0){setWalletBalance(balance);logTrade("üí≥ Balance loaded to wallet.");balance=0;transferred=!0}else{logTrade("‚ùå Nothing to transfer")}if(transferred){transferSound.currentTime=0;transferSound.play()}updateUI()};panel.addEventListener('dblclick',()=>{document.getElementById("wallet-icon").click()});document.getElementById("settings-icon").onclick=()=>{resetSound.play();balance=invested=holding=sold=pnl=lastPercentage=0;setPanelBalance(0);tradeLog=[];saveTradeLog(tradeLog);document.getElementById("trade-log").innerHTML='';saveTradingState({balance,holding,invested,sold,pnl,lastPercentage});updateUI()};document.getElementById("close-panel").onclick=()=>{panel.style.display='none';toggleBtn.textContent='‚ö°'};panel.querySelectorAll('.buy-btn').forEach(btn=>{btn.onclick=()=>{const amt=parseFloat(btn.dataset.amount.replace(/,/g,''));const mc=parseMarketCap(getMarketCap());if(!mc||mc<=0||balance<amt){logTrade("‚ùå Not enough balance or invalid market price");return}const qty=amt/mc;if(holding===0){invested=0;sold=0;pnl=0;lastPercentage=0}balance-=amt;invested+=amt;holding+=qty;buySound.currentTime=0;buySound.play();logTrade(`üü¢ Bought at ${getMarketCap()}`);updateUI()}});panel.querySelectorAll('.sell-btn').forEach(btn=>{btn.onclick=()=>{const pct=parseFloat(btn.dataset.pct)/100;const mc=parseMarketCap(getMarketCap());if(!mc||mc<=0||holding<=0){logTrade("‚ùå Nothing to sell or invalid market price");return}const qty=holding*pct;const proceeds=qty*mc;const avgPrice=invested/holding;const cost=avgPrice*qty;balance+=proceeds;sold+=proceeds;holding-=qty;pnl=proceeds-cost;lastPercentage=(pnl/cost)*100;sellSound.currentTime=0;sellSound.play();const pnlColor=pnl>=0?'#0f0':'#f00';const pnlSign=pnl>=0?'+':'';logTrade(`üî¥ Sold at ${getMarketCap()}| <span style="color:${pnlColor}; font-weight: bold;">${pnlSign}$${pnl.toFixed(2)}</span>`);updateUI()}});let takeProfitEnabled=localStorage.getItem(TP_ENABLED_KEY)==='true';let takeProfitPercentage=parseFloat(localStorage.getItem(TP_PERCENTAGE_KEY)||"0");let stopLossEnabled=localStorage.getItem(SL_ENABLED_KEY)==='true';let stopLossPercentage=parseFloat(localStorage.getItem(SL_VALUE_KEY)||"0");document.getElementById("tp-settings-icon").onclick=()=>{document.getElementById("tp-input").value=takeProfitPercentage||'';document.getElementById("tp-checkbox").checked=takeProfitEnabled;document.getElementById("sl-input").value=stopLossPercentage||'';document.getElementById("sl-checkbox").checked=stopLossEnabled;document.getElementById("tp-popup").style.display='block'};document.getElementById("tp-save").addEventListener("click",()=>{takeProfitPercentage=parseFloat(document.getElementById("tp-input").value||"0");takeProfitEnabled=document.getElementById("tp-checkbox").checked;stopLossPercentage=parseFloat(document.getElementById("sl-input").value||"0");stopLossEnabled=document.getElementById("sl-checkbox").checked;localStorage.setItem(TP_PERCENTAGE_KEY,takeProfitPercentage);localStorage.setItem(TP_ENABLED_KEY,takeProfitEnabled);localStorage.setItem(SL_VALUE_KEY,stopLossPercentage);localStorage.setItem(SL_ENABLED_KEY,stopLossEnabled);if(stopLossEnabled){logTrade(`üõë SL set to ${stopLossPercentage}% - Enabled`)}else{logTrade(`üõë SL Disabled`)}if(takeProfitEnabled){logTrade(`üéØ TP set to ${takeProfitPercentage}% - Enabled`)}else{logTrade(`üéØ TP Disabled`)}document.getElementById("tp-popup").style.display="none"});document.getElementById("tp-cancel").onclick=()=>{document.getElementById("tp-popup").style.display='none'};const checkStopLoss=()=>{if(!stopLossEnabled||invested<=0||holding<=0)return;const mcText=getMarketCap();if(!mcText||mcText==="$0")return;const currentPrice=parseMarketCap(mcText);if(currentPrice<=0)return;const entryPrice=invested/holding;if(entryPrice<=0)return;const changePercent=((currentPrice-entryPrice)/entryPrice)*100;const slValue=Math.abs(stopLossPercentage);if(changePercent<=-slValue){const qty=holding;const proceeds=qty*currentPrice;const avgPrice=invested/qty;const cost=avgPrice*qty;balance+=proceeds;sold+=proceeds;pnl=proceeds-cost;lastPercentage=(pnl/cost)*100;holding=0;sellSound.currentTime=0;sellSound.play();logTrade(`üõë SL triggered at ${getMarketCap()}| <span style="color:red; font-weight: bold;">-${Math.abs(pnl).toFixed(2)}</span>`);updateUI()}};const checkTakeProfit=()=>{if(!takeProfitEnabled||invested<=0||holding<=0)return;const mcText=getMarketCap();if(!mcText||mcText==="$0")return;const currentPrice=parseMarketCap(mcText);if(currentPrice<=0)return;const entryPrice=invested/holding;if(entryPrice<=0)return;const currentPnl=(currentPrice*holding)-invested;const percentGain=(currentPnl/invested)*100;if(percentGain>=takeProfitPercentage){const qty=holding;const proceeds=qty*currentPrice;const avgPrice=invested/holding;const cost=avgPrice*qty;balance+=proceeds;sold+=proceeds;holding=0;pnl=proceeds-cost;lastPercentage=(pnl/cost)*100;sellSound.currentTime=0;sellSound.play();logTrade(`üöÄ TP triggered at ${getMarketCap()}| <span style="color:#0f0; font-weight: bold;">+$${pnl.toFixed(2)}</span>`);updateUI()}};let dragging=!1,offsetX=0,offsetY=0;let draggingToggle=!1,offsetXT=0,offsetYT=0;panel.onmousedown=e=>{if(e.target.tagName.toLowerCase()==='button')return;dragging=!0;offsetX=e.clientX-panel.offsetLeft;offsetY=e.clientY-panel.offsetTop};toggleBtn.onmousedown=e=>{draggingToggle=!0;offsetXT=e.clientX-toggleBtn.offsetLeft;offsetYT=e.clientY-toggleBtn.offsetTop;e.preventDefault()};document.addEventListener('mousemove',e=>{if(dragging){panel.style.left=`${e.clientX - offsetX}px`;panel.style.top=`${e.clientY - offsetY}px`}else if(draggingToggle){toggleBtn.style.left=`${e.clientX - offsetXT}px`;toggleBtn.style.top=`${e.clientY - offsetYT}px`}});document.addEventListener('mouseup',()=>{if(dragging){localStorage.setItem(PANEL_POSITION_KEY,JSON.stringify({top:panel.style.top,left:panel.style.left}))}else if(draggingToggle){localStorage.setItem(TOGGLE_POSITION_KEY,JSON.stringify({top:toggleBtn.style.top,left:toggleBtn.style.left}))}dragging=!1;draggingToggle=!1});let isVisible=!1;toggleBtn.onclick=()=>{isVisible=!isVisible;panel.style.display=isVisible?'block':'none';toggleBtn.textContent=isVisible?'üìä':'‚ö°'};setInterval(()=>{updateUI();checkStopLoss();checkTakeProfit()},1000);function isCoinPage(){return/^https:\/\/axiom\.trade\/meme\/[a-zA-Z0-9]+$/.test(location.href)}function handleNavigation(){if(!isCoinPage()){panel.style.display='none';toggleBtn.style.display='none'}else{toggleBtn.style.display='flex';panel.style.display='none'}}let lastUrl=location.href;setInterval(()=>{if(location.href!==lastUrl){lastUrl=location.href;handleNavigation()}},500);handleNavigation();restoreTradeLog();updateUI()})()
